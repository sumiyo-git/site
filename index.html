<!DOCTYPE html>
<!--
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣴⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⠋⠀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⠇⢸⠀⠀⠀⠀⠀⠀⠀⠀⡼⠁⠀⢰⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡟⠀⢸⡆⠀⠀⠀⠀⠀⠀⡼⠁⠀⠀⡜⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠃⠀⢸⡇⠀⠀⠀⠀⠀⢰⠃⠀⠀⢰⠃⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡟⠀⠀⢰⡇⠀⠀⠀⠀⠀⡟⠀⠀⢀⡏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⢸⡇⠀⠀⠀⠀⢠⡇⠀⠀⡼⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠀⢸⣇⣤⠤⠴⠒⠚⠃⠀⡼⢥⣀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀んなぁ～⠀⠀⠀⠀⡇⠀⠀⠈⠁⠀⠀⠀⠀⠀⠀⠘⠁⠀⠀⠈⠙⠲⢤⡀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡠⠊⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣀⣀⢤⠄⠀⠀⠀⠘⡆⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⡠⠋⠀⠀⣀⣀⠤⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⠀⠀⡇⠀⠀⠀⢀⡇⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⡜⠀⠀⠈⢹⠀⢸⠆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠒⠚⠁⠀⠀⣠⠞⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣇⠀⠀⠀⠀⠢⠚⠀⠀⠀⠀⠀⣠⣄⣀⣤⡆⠀⠀⠀⢀⡤⡞⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠈⠳⢤⣄⡀⠀⠀⠀⠀⠈⠙⢍⣀⣀⡤⠞⣀⣠⢴⡾⠋⠀⣹⣤⠖⠉⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⣀⠤⠤⣀⣈⡏⠛⠓⠒⠒⠀⠀⠠⠴⢒⣚⡯⠽⢲⣊⠤⠖⠋⠁⠈⠳⡄⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠐⣇⠀⠀⠄⠀⡏⠉⠓⠀⠀⢀⡤⠔⠊⡍⢀⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠈⠑⠒⠒⠒⠃⠀⠀⠀⠀⠈⠑⠒⠶⠒⠊⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀

-->

<html lang="zh-CN">
<head>
	<meta charset="UTF-8" >
	<meta name="viewport" content="width=device-width, initial-scale=1.0" >
	<title>sumiyo ~</title>

	<link rel="shortcut icon" href="src/icon.png?ver=10" />
	<link rel="stylesheet" type="text/css" href="css/root.css" />
	<link rel="stylesheet" type="text/css" href="css/player.css"  />
	<link rel="preload" as="font" crossorigin="anonymous" href="src/font/Poppins Regular.woff2" />
</head>
<body>
<script>
	// 定义核心变量
	const env = {
		'd': {
			'visitors': 0,
			'domain': 'sumiyo.link',
			'title': document.title,
			'lang': navigator.language || navigator.userLanguage,
			'isNew': null,
			'isNetwork': (document.domain ? true : false),
			'isMobile': (window.innerWidth < window.innerHeight ? true : false),
			'version': {},
			'list': {},
			'init': {
				'root': 0,
			},
		},
		'f': {},
		'e': {},
		'tmp': {
			'root': {
				'd1': new Date(),
				'd2': null,
				'd3': null,

				't1': null,
				't2': null,
			}
		}
	}

	env.tmp.root.t1 = setInterval(() => {
		if (!document.hidden && env.tmp.root.d2 && env.d.init.root == 2) {
			env.d.init.root = 1
			setTimeout(function (){
				setTimeout(function (){
					env.f.root.avatar()
					env.e.root.backdrop[0]?.remove()
				}, 500)

				env.e.root.backdrop[0]?.removeAttribute('style')
				clearInterval(env.tmp.root.t1)
			}, 3000)
		}
	}, 1000)

</script>

<div class="main" >
	<backdrop class="loading" style="opacity: 1" ></backdrop>
	<img class="avatar" onload="env.d.init.root = 2" src="src/mio.webp" style="display: none;" />
	<canvas class="avatar" ></canvas>

	<header>
		<btn onclick="env.f.root.menu.open()" ></btn>
		<a onclick="env.f.root.blog.open('page/square')" >网站广场</a> | <a onclick="env.f.root.blog.open('page/about')" >关于</a>
		<backdrop onclick="env.f.root.menu.close()" style="display: none;" ></backdrop>
	</header>

	<div class="des" style="display: none;" >
		<span>sumiyo</span>
		<span>私のサイト、私一人の世界です。</span>
	</div>

	<!-- 博客 -->
	<div class="blog" style="display: none;" >
		<header class="header-box" ><btn onclick="env.f.root.blog.close()" ></btn></header>
		<div class="player-blog" onclick="env.f.player.lrc.ui()" >音乐播放器</div>
		<backdrop style="display: none;" ></backdrop>
	</div>

	<!-- 菜单 -->
	<div class="menu" >
		<h1>MENU</h1>
		<hr />

		<!-- 博客 -->
		<div style="margin-top: 10px;" >
			<btn onclick="env.f.root.menu.folder(this)" data-item="0" class="active" >检索:</btn>
			<div class="search" >
				<textarea type="text" oninput="this.value = this.value.replace(/\n/g, ''); env.f.root.search()" maxlength="20" autocomplete="off" ></textarea>
				<list><div style="display: none;" class="none" >没有找到指定内容...</div></list>
			</div>
		</div>

		<!-- 通知 -->
		<div>
			<btn onclick="env.f.root.menu.folder(this)" class="active" >通知</btn>
			<div class="menu-c2" ></div>
		</div>

		<hr style="margin-top: 80px;" />

		<!-- 其他 -->
		<div style="margin-top: 10px;" >
			<btn onclick="env.f.root.menu.folder(this)" class="active" >其他</btn>
			<div class="menu-c3" >
				<a href="mailto:me@sumiyo.link" target="_blank" title="我的邮箱" ></a>
				<a onclick="env.f.root.blog.open('page/policy')" title="隐私政策 & 使用协议" ></a>
				<a onclick="env.f.root.blog.open('page/history')" title="开发记录" ></a>
				<a onclick="env.f.player.lrc.ui()" title="歌曲" ></a>
			</div>
		</div>
	</div>

	<!-- 播放器  -->
	<div class="player-ui backdrop" style="display: none;" tabindex="0" >
		<img class="wallpaper" onload="env.f.root.fade(env.e.player.img[0], 500); env.f.root.fade(env.e.player.img[1], 500)" />
		<backdrop></backdrop>
		<header><btn onclick="env.f.player.lrc.ui()" ></btn></header>
		<div class="ui" >
			<aside>
				<div class="cover" ><img /></div>
				<div class="ctrl" >
					<bar><div><div></div></div></bar>
					<div style="margin-top: 10px; user-select: none;" >
						<a onclick="env.f.player.play()" title="播放 / 暂停 (Space)" >00:00</a>
						<a onclick="env.f.player.list()" >歌单</a>
						<a onclick="env.f.player.reset()" >重置</a>｜ 
						<a onclick="env.f.player.mode()" title="列表循环" ></a>
						<a onclick="env.f.player.kana()" title="假名注音" style="display: none;" >あ</a>
						<a title="音量 ( ↑ / ↓ )" ><div></div></a>
					</div>	
				</div>		
			</aside>
			<aside>
				<list class="no-kana" ><div></div></list>
				<list style="display: none" ><div></div></list>
			</aside>
		</div>
	</div>

	<!-- 弹窗 -->
	<div class="prompt" ></div>

	<!-- 页脚 -->
	<footer>
		<div class="f-2" >
			技术支持: <a onclick="window.open('https://www.cloudflare.com/')" >Cloudflare</a>
		</div>
		<div style="opacity: 0;">
			<!-- 网站统计 -->
			 | <tag>0</tag> 天 & <tag>0</tag> 访客
		</div>
	</footer>

</div>



<!-- 脚本 -->
<script src="blog/registry.db.js" ></script>
<script src="js/root.js" ></script>
<script src="js/player.js"></script>

<script>
	// 检查页面加载情况
	setTimeout(function (){
		if (!env.tmp.root.d2) {
			var e = document.querySelector('.prompt')
			var prompt = document.createElement('prompt')
				prompt.innerHTML = `网页加载异常！<br/><a onclick="location.reload();" ><ins>刷新网页</ins></a> & <a onclick="env.d.init.root = 2; env.tmp.root.d2 = 1;" ><ins>强制显示</ins>`
				prompt.setAttribute('onclick', `this.removeAttribute('class'); setTimeout(function (){this.remove()}, 500)`)
				e.appendChild(prompt)

			setTimeout(function (){
				prompt.setAttribute('class', 'active')
			}, 100)
		}
	}, 30000)
</script>
</body>
</html>